(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Y8LX:function(t,e,i){"use strict";i.r(e);var n=i("3xsP"),o=function(){},s=i("Rh7J"),r=i("zNit"),a=i("1FVJ"),l=i("5xlC"),h=i("mrSG"),u=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(t.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prev",{get:function(){return this._prev},set:function(t){this._prev=t},enumerable:!0,configurable:!0}),t}(),c=function(){function t(e){t._instance=this;for(var i=this.firstAvailable=new u,n=1;n<e;n++){var o=new u;i.next=o,i=o}}return Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t.prototype.borrow=function(t,e){if(null==this.firstAvailable)throw"Pool exhausted";this.borrowed++;var i=this.firstAvailable;return this.firstAvailable=i.next,i.x=t,i.y=e,i},t.prototype.returnPoint=function(t){this.borrowed--,t.x=0,t.y=0,t.next=this.firstAvailable,this.firstAvailable=t},t}(),p=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.left=t,this.right=t+i,this.top=e,this.bottom=e+n}return Object.defineProperty(t.prototype,"width",{get:function(){return this.right-this.left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!0,configurable:!0}),t.prototype.getCentre=function(){return c.instance.borrow(this.left+this.width/2,this.top+this.height/2)},t}(),d=function(t){this.lineDash=!1,this.strokeWidth=1,this.strokeColor="rgba(255,255,255,1)",this.dragIconStrokeWidth=1,this.dragIconStrokeColor="rgba(0,0,0,1)",this.dragIconFillColor="rgba(255,255,255,1)","object"==typeof t&&(this.lineDash=t.lineDash||this.lineDash,this.strokeWidth=t.strokeWidth||this.strokeWidth,this.strokeColor=t.strokeColor||this.strokeColor,this.dragIconStrokeWidth=t.dragIconStrokeWidth||this.dragIconStrokeWidth,this.dragIconStrokeColor=t.dragIconStrokeColor||this.dragIconStrokeColor,this.dragIconFillColor=t.dragIconFillColor||this.dragIconFillColor)},g=function(){function t(t){this.canvasWidth=300,this.canvasHeight=300,this.dynamicSizing=!1,this.width=200,this.height=200,this.minWidth=50,this.minHeight=50,this.minWithRelativeToResolution=!0,this.croppedWidth=100,this.croppedHeight=100,this.cropperDrawSettings=new d,this.touchRadius=20,this.noFileInput=!1,this.markerSizeMultiplier=1,this.centerTouchRadius=20,this.showCenterMarker=!0,this.allowedFilesRegex=/\.(jpe?g|png|gif|bmp)$/i,this.cropOnResize=!0,this.preserveSize=!1,this.compressRatio=1,this._rounded=!1,this._keepAspect=!0,"object"==typeof t&&Object.assign(this,t)}return Object.defineProperty(t.prototype,"rounded",{get:function(){return this._rounded},set:function(t){this._rounded=t,t&&(this._keepAspect=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepAspect",{get:function(){return this._keepAspect},set:function(t){this._keepAspect=t,!0===this._rounded&&!1===this._keepAspect&&(console.error("Cannot set keep aspect to false on rounded cropper. Ellipsis not supported"),this._keepAspect=!0)},enumerable:!0,configurable:!0}),t}(),f=function(){function t(t,e,i,n){this.cropperSettings=new g,this.over=!1,this.drag=!1,this._position=new u(t,e),this.offset=new u(0,0),this.radius=i,this.cropperSettings=n}return t.prototype.setDrag=function(t){this.drag=t,this.setOver(t)},t.prototype.draw=function(t){},t.prototype.setOver=function(t){this.over=t},t.prototype.touchInBounds=function(t,e){return t>this.position.x-this.radius+this.offset.x&&t<this.position.x+this.radius+this.offset.x&&e>this.position.y-this.radius+this.offset.y&&e<this.position.y+this.radius+this.offset.y},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(t,e){this._position.x=t,this._position.y=e},t}(),m=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return Object(h.__extends)(e,t),e.prototype.drawCornerBorder=function(t){var e=10;(this.over||this.drag)&&(e=12);var i=this.cropperSettings.markerSizeMultiplier,n=this.cropperSettings.markerSizeMultiplier;if(this.horizontalNeighbour.position.x<this.position.x&&(i=-this.cropperSettings.markerSizeMultiplier),this.verticalNeighbour.position.y<this.position.y&&(n=-this.cropperSettings.markerSizeMultiplier),this.cropperSettings.rounded){var o=this.position.x-this.horizontalNeighbour.position.x,s=this.position.y-this.verticalNeighbour.position.y,r=Math.round(Math.sin(Math.PI/2)*Math.abs(o/2))/4,a=Math.round(Math.sin(Math.PI/2)*Math.abs(s/2))/4;this.offset.x=i>0?r:-r,this.offset.y=n>0?a:-a}else this.offset.x=0,this.offset.y=0;t.beginPath(),this.cropperSettings.cropperDrawSettings.lineDash&&t.setLineDash([1,3]),t.lineJoin="miter",t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor||"rgba(255,255,255,.7)",t.stroke()},e.prototype.drawCornerFill=function(t){var e=10;(this.over||this.drag)&&(e=12);var i=this.cropperSettings.markerSizeMultiplier,n=this.cropperSettings.markerSizeMultiplier;this.horizontalNeighbour.position.x<this.position.x&&(i=-this.cropperSettings.markerSizeMultiplier),this.verticalNeighbour.position.y<this.position.y&&(n=-this.cropperSettings.markerSizeMultiplier),t.beginPath(),this.cropperSettings.cropperDrawSettings.lineDash&&t.setLineDash([1,3]),t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.fillStyle=this.cropperSettings.cropperDrawSettings.strokeColor||"rgba(255,255,255,.7)",t.fill()},e.prototype.moveX=function(t){this.setPosition(t,this.position.y)},e.prototype.moveY=function(t){this.setPosition(this.position.x,t)},e.prototype.move=function(t,e){this.setPosition(t,e),this.verticalNeighbour.moveX(t),this.horizontalNeighbour.moveY(e)},e.prototype.addHorizontalNeighbour=function(t){this.horizontalNeighbour=t},e.prototype.addVerticalNeighbour=function(t){this.verticalNeighbour=t},e.prototype.getHorizontalNeighbour=function(){return this.horizontalNeighbour},e.prototype.getVerticalNeighbour=function(){return this.verticalNeighbour},e.prototype.draw=function(t){this.drawCornerFill(t),this.drawCornerBorder(t)},e}(f),v=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.id=i,this.x=t,this.y=e},y=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.iconPoints=[],s.scaledIconPoints=[],s.getDragIconPoints(s.iconPoints,1),s.getDragIconPoints(s.scaledIconPoints,1.2),s}return Object(h.__extends)(e,t),e.prototype.draw=function(t){this.drawIcon(t,this.over||this.drag?this.scaledIconPoints:this.iconPoints)},e.prototype.getDragIconPoints=function(t,e){var i=17*e,n=14*e,o=8*e,s=4*e;t.push(c.instance.borrow(-s/2,i-o)),t.push(c.instance.borrow(-n/2,i-o)),t.push(c.instance.borrow(0,i)),t.push(c.instance.borrow(n/2,i-o)),t.push(c.instance.borrow(s/2,i-o)),t.push(c.instance.borrow(s/2,s/2)),t.push(c.instance.borrow(i-o,s/2)),t.push(c.instance.borrow(i-o,n/2)),t.push(c.instance.borrow(i,0)),t.push(c.instance.borrow(i-o,-n/2)),t.push(c.instance.borrow(i-o,-s/2)),t.push(c.instance.borrow(s/2,-s/2)),t.push(c.instance.borrow(s/2,-i+o)),t.push(c.instance.borrow(n/2,-i+o)),t.push(c.instance.borrow(0,-i)),t.push(c.instance.borrow(-n/2,-i+o)),t.push(c.instance.borrow(-s/2,-i+o)),t.push(c.instance.borrow(-s/2,-s/2)),t.push(c.instance.borrow(-i+o,-s/2)),t.push(c.instance.borrow(-i+o,-n/2)),t.push(c.instance.borrow(-i,0)),t.push(c.instance.borrow(-i+o,n/2)),t.push(c.instance.borrow(-i+o,s/2)),t.push(c.instance.borrow(-s/2,s/2))},e.prototype.drawIcon=function(t,e){if(this.cropperSettings.showCenterMarker){t.beginPath(),t.moveTo(e[0].x+this.position.x,e[0].y+this.position.y);for(var i=0;i<e.length;i++){var n=e[i];t.lineTo(n.x+this.position.x,n.y+this.position.y)}t.closePath(),t.fillStyle=this.cropperSettings.cropperDrawSettings.dragIconFillColor,t.fill(),t.lineWidth=this.cropperSettings.cropperDrawSettings.dragIconStrokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.dragIconStrokeColor,t.stroke()}},e.prototype.recalculatePosition=function(t){var e=t.getCentre();this.setPosition(e.x,e.y),c.instance.returnPoint(e)},e}(f),b=function(){function t(){}return t.setPressed=function(t){this.pressed=t},t.setReleased=function(t){},t.setOver=function(t){this.over=t},t.setStyle=function(t,e){},t.share={},t}(),w=function(t){function e(e){var i=t.call(this)||this,n=e.width,o=e.height,s=e.keepAspect,r=e.touchRadius,a=e.centerTouchRadius,l=e.minWidth,h=e.minHeight,u=e.croppedWidth,p=e.croppedHeight;return i.cropperSettings=e,i.crop=i,i.x=0,i.y=0,i.canvasHeight=e.canvasHeight,i.canvasWidth=e.canvasWidth,i.width=n,void 0===n&&(i.width=100),i.height=o,void 0===o&&(i.height=50),i.keepAspect=s,void 0===s&&(i.keepAspect=!0),i.touchRadius=r,void 0===r&&(i.touchRadius=20),i.minWidth=l,i.minHeight=h,i.aspectRatio=0,i.currentDragTouches=[],i.isMouseDown=!1,i.ratioW=1,i.ratioH=1,i.fileType=e.fileType,i.imageSet=!1,i.pointPool=new c(200),i.tl=new m(0,0,r,i.cropperSettings),i.tr=new m(0+n,0,r,i.cropperSettings),i.bl=new m(0,0+o,r,i.cropperSettings),i.br=new m(0+n,0+o,r,i.cropperSettings),i.tl.addHorizontalNeighbour(i.tr),i.tl.addVerticalNeighbour(i.bl),i.tr.addHorizontalNeighbour(i.tl),i.tr.addVerticalNeighbour(i.br),i.bl.addHorizontalNeighbour(i.br),i.bl.addVerticalNeighbour(i.tl),i.br.addHorizontalNeighbour(i.bl),i.br.addVerticalNeighbour(i.tr),i.markers=[i.tl,i.tr,i.bl,i.br],i.center=new y(0+n/2,0+o/2,a,i.cropperSettings),i.aspectRatio=o/n,i.croppedImage=new Image,i.currentlyInteracting=!1,i.cropWidth=u,i.cropHeight=p,i}return Object(h.__extends)(e,t),e.sign=function(t){return+t===t?0===t?t:t>0?1:-1:NaN},e.getMousePos=function(t,e){var i=t.getBoundingClientRect();return c.instance.borrow(e.clientX-i.left,e.clientY-i.top)},e.getTouchPos=function(t,e){var i=t.getBoundingClientRect();return c.instance.borrow(e.clientX-i.left,e.clientY-i.top)},e.detectVerticalSquash=function(t){var e=t.height,i=document.createElement("canvas");i.width=1,i.height=e;var n=i.getContext("2d");n.drawImage(t,0,0);var o=n.getImageData(0,0,1,e);if(o){for(var s=o.data,r=0,a=e,l=e;l>r;)0===s[4*(l-1)+3]?a=l:r=l,l=a+r>>1;var h=l/e;return 0===h?1:h}return 1},e.prototype.getDataUriMimeType=function(t){var e=t.substring(0,50),i="image/png",n=RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi).exec(e);return n&&n[2]&&"image/jpg"==(i=n[2])&&(i="image/jpeg"),i},e.prototype.prepare=function(t){this.buffer=document.createElement("canvas"),this.cropCanvas=document.createElement("canvas");var e=t.parentElement?t.parentElement.clientWidth:0;e>0&&this.cropperSettings.dynamicSizing?(this.cropCanvas.width=e,this.buffer.width=e,t.width=e):(this.cropCanvas.width=this.cropWidth,this.buffer.width=t.width),this.cropCanvas.height=this.cropHeight,this.buffer.height=t.height,this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.draw(this.ctx)},e.prototype.updateSettings=function(t){this.cropperSettings=t},e.prototype.resizeCanvas=function(t,e,i){void 0===i&&(i=!1),this.canvas.width=this.cropCanvas.width=this.width=this.canvasWidth=this.buffer.width=t,this.canvas.height=this.cropCanvas.height=this.height=this.canvasHeight=this.buffer.height=e,i&&this.setImage(this.srcImage)},e.prototype.reset=function(){this.setImage(void 0)},e.prototype.draw=function(t){var e=this.getBounds();if(this.srcImage){t.clearRect(0,0,this.canvasWidth,this.canvasHeight);var i=this.srcImage.height/this.srcImage.width,n=this.canvasHeight/this.canvasWidth,o=this.canvasWidth,s=this.canvasHeight;n>i?(o=this.canvasWidth,s=this.canvasWidth*i):(s=this.canvasHeight,o=this.canvasHeight/i),this.ratioW=o/this.srcImage.width,this.ratioH=s/this.srcImage.height,n<i?this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,this.buffer.width/2-o/2,0,o,s):this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,0,this.buffer.height/2-s/2,o,s),this.buffer.getContext("2d").drawImage(this.canvas,0,0,this.canvasWidth,this.canvasHeight),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor,t.fillStyle="rgba(0, 0, 0, 0.6)",this.cropperSettings.rounded?(t.fillRect(0,0,this.canvas.width,this.canvas.height),t.save(),t.beginPath(),t.arc(e.left+e.width/2,e.top+e.height/2,e.width/2,0,2*Math.PI),t.clip(),n<i?this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,this.buffer.width/2-o/2,0,o,s):this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,0,this.buffer.height/2-s/2,o,s),t.restore()):(t.fillRect(0,0,this.canvasWidth,this.canvasHeight),t.drawImage(this.buffer,e.left,e.top,Math.max(e.width,1),Math.max(e.height,1),e.left,e.top,e.width,e.height),t.strokeRect(e.left,e.top,e.width,e.height));for(var r=0;r<this.markers.length;r++)this.markers[r].draw(t);this.center.draw(t)}else t.fillStyle="rgba(192,192,192,1)",t.fillRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.dragCenter=function(t,e,i){var n=this.getBounds(),o=t-n.width/2,s=e+n.height/2;t+n.width/2>=this.maxXClamp&&(t=this.maxXClamp-n.width/2),o<=this.minXClamp&&(t=n.width/2+this.minXClamp),e-n.height/2<this.minYClamp&&(e=n.height/2+this.minYClamp),s>=this.maxYClamp&&(e=this.maxYClamp-n.height/2),this.tl.moveX(t-n.width/2),this.tl.moveY(e-n.height/2),this.tr.moveX(t+n.width/2),this.tr.moveY(e-n.height/2),this.bl.moveX(t-n.width/2),this.bl.moveY(e+n.height/2),this.br.moveX(t+n.width/2),this.br.moveY(e+n.height/2),i.setPosition(t,e)},e.prototype.enforceMinSize=function(t,e,i){var n=t-i.getHorizontalNeighbour().position.x,o=e-i.getVerticalNeighbour().position.y,s=this.minWidth-Math.abs(n),r=this.minHeight-Math.abs(o);return 0===n||0===o?c.instance.borrow(t=i.position.x,e=i.position.y):(this.keepAspect?s>0&&r/this.aspectRatio>0?s>r/this.aspectRatio?n<0?(t-=s,o<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):(t+=s,o<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):o<0?(e-=r,n<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio):(e+=r,n<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio):s>0?n<0?(t-=s,o<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):(t+=s,o<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):r>0&&(o<0?(e-=r,n<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio):(e+=r,n<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio)):(s>0&&(n<0?t-=s:t+=s),r>0&&(o<0?e-=r:e+=r)),(t<this.minXClamp||t>this.maxXClamp||e<this.minYClamp||e>this.maxYClamp)&&(t=i.position.x,e=i.position.y),c.instance.borrow(t,e))},e.prototype.dragCorner=function(t,e,i){var n,o=0,s=0,r=0,a=0,l=0;if(this.keepAspect)if(o=(n=i.getHorizontalNeighbour().getVerticalNeighbour()).position.x,s=n.position.y,t<=n.position.x)if(e<=n.position.y)if((l=this.getSide(c.instance.borrow(o-100/this.aspectRatio,s-100/this.aspectRatio*this.aspectRatio),n.position,c.instance.borrow(t,e)))>0){r=Math.abs(n.position.y-e);var h=this.enforceMinSize(n.position.x-(a=r/this.aspectRatio),n.position.y-r,i);i.move(h.x,h.y),c.instance.returnPoint(h)}else l<0&&(a=Math.abs(n.position.x-t),h=this.enforceMinSize(n.position.x-a,n.position.y-(r=a*this.aspectRatio),i),i.move(h.x,h.y),c.instance.returnPoint(h));else(l=this.getSide(c.instance.borrow(o-100/this.aspectRatio,s+100/this.aspectRatio*this.aspectRatio),n.position,c.instance.borrow(t,e)))>0?(a=Math.abs(n.position.x-t),h=this.enforceMinSize(n.position.x-a,n.position.y+(r=a*this.aspectRatio),i),i.move(h.x,h.y),c.instance.returnPoint(h)):l<0&&(r=Math.abs(n.position.y-e),h=this.enforceMinSize(n.position.x-(a=r/this.aspectRatio),n.position.y+r,i),i.move(h.x,h.y),c.instance.returnPoint(h));else e<=n.position.y?(l=this.getSide(c.instance.borrow(o+100/this.aspectRatio,s-100/this.aspectRatio*this.aspectRatio),n.position,c.instance.borrow(t,e)))<0?(r=Math.abs(n.position.y-e),h=this.enforceMinSize(n.position.x+(a=r/this.aspectRatio),n.position.y-r,i),i.move(h.x,h.y),c.instance.returnPoint(h)):l>0&&(a=Math.abs(n.position.x-t),h=this.enforceMinSize(n.position.x+a,n.position.y-(r=a*this.aspectRatio),i),i.move(h.x,h.y),c.instance.returnPoint(h)):(l=this.getSide(c.instance.borrow(o+100/this.aspectRatio,s+100/this.aspectRatio*this.aspectRatio),n.position,c.instance.borrow(t,e)))<0?(a=Math.abs(n.position.x-t),h=this.enforceMinSize(n.position.x+a,n.position.y+(r=a*this.aspectRatio),i),i.move(h.x,h.y),c.instance.returnPoint(h)):l>0&&(r=Math.abs(n.position.y-e),h=this.enforceMinSize(n.position.x+(a=r/this.aspectRatio),n.position.y+r,i),i.move(h.x,h.y),c.instance.returnPoint(h));else h=this.enforceMinSize(t,e,i),i.move(h.x,h.y),c.instance.returnPoint(h);this.center.recalculatePosition(this.getBounds())},e.prototype.getSide=function(t,i,n){var o=e.sign((i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x));return c.instance.returnPoint(t),c.instance.returnPoint(n),o},e.prototype.handleRelease=function(t){if(null!=t){for(var e=0,i=0;i<this.currentDragTouches.length;i++)t.id===this.currentDragTouches[i].id&&(this.currentDragTouches[i].dragHandle.setDrag(!1),e=i);this.currentDragTouches.splice(e,1),this.draw(this.ctx)}},e.prototype.handleMove=function(t){for(var e=!1,i=0;i<this.currentDragTouches.length;i++)if(t.id===this.currentDragTouches[i].id&&null!=this.currentDragTouches[i].dragHandle){var n=this.currentDragTouches[i],o=this.clampPosition(t.x-n.dragHandle.offset.x,t.y-n.dragHandle.offset.y);t.x=o.x,t.y=o.y,c.instance.returnPoint(o),n.dragHandle instanceof m?this.dragCorner(t.x,t.y,n.dragHandle):this.dragCenter(t.x,t.y,n.dragHandle),this.currentlyInteracting=!0,e=!0,b.setPressed(this.canvas);break}if(!e){for(var s=0;s<this.markers.length;s++){var r=this.markers[s];if(r.touchInBounds(t.x,t.y)){t.dragHandle=r,this.currentDragTouches.push(t),r.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCorner(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle);break}}null!==t.dragHandle&&void 0!==t.dragHandle||this.center.touchInBounds(t.x,t.y)&&(t.dragHandle=this.center,this.currentDragTouches.push(t),t.dragHandle.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCenter(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle))}},e.prototype.updateClampBounds=function(){var t=this.srcImage.height/this.srcImage.width,e=this.canvas.width,i=this.canvas.height;this.canvas.height/this.canvas.width>t?(e=this.canvas.width,i=this.canvas.width*t):(i=this.canvas.height,e=this.canvas.height/t),this.minXClamp=this.canvas.width/2-e/2,this.minYClamp=this.canvas.height/2-i/2,this.maxXClamp=this.canvas.width/2+e/2,this.maxYClamp=this.canvas.height/2+i/2},e.prototype.getCropBounds=function(){var t=this.getBounds();return t.top=Math.round((t.top-this.minYClamp)/this.ratioH),t.bottom=Math.round((t.bottom-this.minYClamp)/this.ratioH),t.left=Math.round((t.left-this.minXClamp)/this.ratioW),t.right=Math.round((t.right-this.minXClamp)/this.ratioW),t},e.prototype.clampPosition=function(t,e){return t<this.minXClamp&&(t=this.minXClamp),t>this.maxXClamp&&(t=this.maxXClamp),e<this.minYClamp&&(e=this.minYClamp),e>this.maxYClamp&&(e=this.maxYClamp),c.instance.borrow(t,e)},e.prototype.isImageSet=function(){return this.imageSet},e.prototype.setImage=function(t){if(this.srcImage=t,t){this.imageSet=!0,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.buffer.getContext("2d").clearRect(0,0,this.buffer.width,this.buffer.height),this.cropperSettings.fileType||(this.fileType=this.getDataUriMimeType(t.src)),this.cropperSettings.minWithRelativeToResolution&&(this.minWidth=this.canvas.width*this.cropperSettings.minWidth/this.srcImage.width,this.minHeight=this.canvas.height*this.cropperSettings.minHeight/this.srcImage.height),this.updateClampBounds(),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height;var e=this.getCropPositionFromMarkers();this.setCropPosition(e)}else this.imageSet=!1,this.draw(this.ctx)},e.prototype.updateCropPosition=function(t){var e=this.getCropPositionFromBounds(t);this.setCropPosition(e)},e.prototype.setCropPosition=function(t){this.tl.setPosition(t[0].x,t[0].y),this.tr.setPosition(t[1].x,t[1].y),this.bl.setPosition(t[2].x,t[2].y),this.br.setPosition(t[3].x,t[3].y),this.center.setPosition(t[4].x,t[4].y);for(var i=0,n=t;i<n.length;i++)c.instance.returnPoint(n[i]);this.vertSquashRatio=e.detectVerticalSquash(this.srcImage),this.draw(this.ctx),this.croppedImage=this.getCroppedImageHelper(!1,this.cropWidth,this.cropHeight)},e.prototype.getCropPositionFromMarkers=function(){var t,e,i,n,o=this.canvas.width,s=this.canvas.height,r=this.srcImage.height/this.srcImage.width,a=this.getBounds(),l=a.height/a.width,h=this.canvas.width/2,u=this.canvas.height/2;if(l>r){var p=Math.min(o*r,s),d=p/l;t=c.instance.borrow(h-d/2,u+p/2),e=c.instance.borrow(h+d/2,u+p/2),i=c.instance.borrow(h-d/2,u-p/2),n=c.instance.borrow(h+d/2,u-p/2)}else{var g=Math.min(s/r,o),f=g*l;t=c.instance.borrow(h-g/2,u+f/2),e=c.instance.borrow(h+g/2,u+f/2),i=c.instance.borrow(h-g/2,u-f/2),n=c.instance.borrow(h+g/2,u-f/2)}return[t,e,i,n,c.instance.borrow(h,u)]},e.prototype.getCropPositionFromBounds=function(t){var e=0,i=0,n=this.srcImage.height/this.srcImage.width;this.canvasHeight/this.canvasWidth>n?e=this.buffer.height/2-this.canvasWidth*n/2:i=this.buffer.width/2-this.canvasHeight/n/2;var o=(this.canvasWidth-2*i)/this.srcImage.width,s=(this.canvasHeight-2*e)/this.srcImage.height,r=t.height*s,a=t.width*o,l=t.left*o+i,h=t.top*s+e;if(this.keepAspect){var u=r/this.aspectRatio,p=a*this.aspectRatio;this.getCropBounds().height===t.height?r=p:this.getCropBounds().width===t.width?a=u:Math.abs(p-r)<Math.abs(u-a)?a=u:r=p}return[c.instance.borrow(l,h+r),c.instance.borrow(l+a,h+r),c.instance.borrow(l,h),c.instance.borrow(l+a,h),c.instance.borrow(l+a/2,h+r/2)]},e.prototype.getCroppedImageHelper=function(t,e,i){return this.cropperSettings.cropOnResize?this.getCroppedImage(t,e,i):this.croppedImage?this.croppedImage:document.createElement("img")},e.prototype.getCroppedImage=function(t,e,i){var n=this.getBounds();if(this.srcImage){var o=this.srcImage.height/this.srcImage.width,s=this.canvas.height/this.canvas.width,r=this.canvas.width,a=this.canvas.height;s>o?(r=this.canvas.width,a=this.canvas.width*o):s<o?(a=this.canvas.height,r=this.canvas.height/o):(a=this.canvas.height,r=this.canvas.width),this.ratioW=r/this.srcImage.width,this.ratioH=a/this.srcImage.height;var l=(this.buffer.height-a)/2/this.ratioH,h=(this.buffer.width-r)/2/this.ratioW,u=this.cropCanvas.getContext("2d");if(this.cropperSettings.preserveSize||t){var c=Math.round(n.right/this.ratioW-n.left/this.ratioW),p=Math.round(n.bottom/this.ratioH-n.top/this.ratioH);this.cropCanvas.width=c,this.cropCanvas.height=p,this.cropperSettings.croppedWidth=this.cropCanvas.width,this.cropperSettings.croppedHeight=this.cropCanvas.height}else this.cropCanvas.width=this.cropWidth,this.cropCanvas.height=this.cropHeight;return u.clearRect(0,0,this.cropCanvas.width,this.cropCanvas.height),this.drawImageIOSFix(u,this.srcImage,Math.max(Math.round(n.left/this.ratioW-h),0),Math.max(Math.round(n.top/this.ratioH-l),0),Math.max(Math.round(n.width/this.ratioW),1),Math.max(Math.round(n.height/this.ratioH),1),0,0,this.cropCanvas.width,this.cropCanvas.height),this.cropperSettings.resampleFn&&this.cropperSettings.resampleFn(this.cropCanvas),this.croppedImage.width=this.cropCanvas.width,this.croppedImage.height=this.cropCanvas.height,this.croppedImage.src=this.cropCanvas.toDataURL(this.fileType,this.cropperSettings.compressRatio),this.croppedImage}return document.createElement("img")},e.prototype.getBounds=function(){for(var t=Number.MAX_VALUE,e=Number.MAX_VALUE,i=-Number.MAX_VALUE,n=-Number.MAX_VALUE,o=0;o<this.markers.length;o++){var s=this.markers[o];s.position.x<t&&(t=s.position.x),s.position.x>i&&(i=s.position.x),s.position.y<e&&(e=s.position.y),s.position.y>n&&(n=s.position.y)}var r=new p;return r.left=t,r.right=i,r.top=e,r.bottom=n,r},e.prototype.setBounds=function(t){for(var e=this.getBounds(),i=0;i<this.markers.length;i++){var n=this.markers[i];n.setPosition(n.position.x===e.left?t.left:t.right,n.position.y===e.top?t.top:t.bottom)}this.center.recalculatePosition(t),this.center.draw(this.ctx),this.draw(this.ctx)},e.prototype.onTouchMove=function(t){if(this.crop.isImageSet()){if(1===t.touches.length){if(this.isMouseDown){t.preventDefault();for(var i=0;i<t.touches.length;i++){var n=t.touches[i],o=e.getTouchPos(this.canvas,n),s=new v(o.x,o.y,n.identifier);c.instance.returnPoint(o),this.move(s)}}}else if(2===t.touches.length){t.preventDefault();var r=(t.touches[0].clientX-t.touches[1].clientX)*(t.touches[0].clientX-t.touches[1].clientX)+(t.touches[0].clientY-t.touches[1].clientY)*(t.touches[0].clientY-t.touches[1].clientY);if(this.previousDistance&&this.previousDistance!==r){var a=this.getBounds();r<this.previousDistance&&(a.top+=1,a.left+=1,a.right-=1,a.bottom-=1),r>this.previousDistance&&(a.top!==this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right!==this.maxXClamp?(a.top-=1,a.left-=1,a.right+=1,a.bottom+=1):a.top!==this.minYClamp&&a.bottom!==this.maxYClamp&&a.left===this.minXClamp&&a.right!==this.maxXClamp?(a.top-=1,a.right+=2,a.bottom+=1):a.top!==this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right===this.maxXClamp?(a.top-=1,a.left-=2,a.bottom+=1):a.top===this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right!==this.maxXClamp?(a.left-=1,a.right+=1,a.bottom+=2):a.top!==this.minYClamp&&a.bottom===this.maxYClamp&&a.left!==this.minXClamp&&a.right!==this.maxXClamp?(a.top-=2,a.left-=1,a.right+=1):a.top===this.minYClamp&&a.bottom!==this.maxYClamp&&a.left===this.minXClamp&&a.right!==this.maxXClamp?(a.right+=2,a.bottom+=2):a.top===this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right===this.maxXClamp?(a.left-=2,a.bottom+=2):a.top!==this.minYClamp&&a.bottom===this.maxYClamp&&a.left===this.minXClamp&&a.right!==this.maxXClamp?(a.top-=2,a.right+=2):a.top!==this.minYClamp&&a.bottom===this.maxYClamp&&a.left!==this.minXClamp&&a.right===this.maxXClamp&&(a.top-=2,a.left-=2)),a.top<this.minYClamp&&(a.top=this.minYClamp),a.bottom>this.maxYClamp&&(a.bottom=this.maxYClamp),a.left<this.minXClamp&&(a.left=this.minXClamp),a.right>this.maxXClamp&&(a.right=this.maxXClamp),this.setBounds(a)}this.previousDistance=r}this.draw(this.ctx)}},e.prototype.onMouseMove=function(t){if(this.crop.isImageSet()&&this.isMouseDown){var i=e.getMousePos(this.canvas,t);this.move(new v(i.x,i.y,0));var n=this.getDragTouchForID(0);n?(n.x=i.x,n.y=i.y):n=new v(i.x,i.y,0),c.instance.returnPoint(i),this.drawCursors(n),this.draw(this.ctx)}},e.prototype.move=function(t){this.isMouseDown&&this.handleMove(t)},e.prototype.getDragTouchForID=function(t){for(var e=0;e<this.currentDragTouches.length;e++)if(t===this.currentDragTouches[e].id)return this.currentDragTouches[e]},e.prototype.drawCursors=function(t){var e=!1;null!=t&&(t.dragHandle===this.center&&(b.setStyle(this.canvas,"move"),e=!0),null!==t.dragHandle&&t.dragHandle instanceof m&&(this.drawCornerCursor(t.dragHandle,t.dragHandle.position.x,t.dragHandle.position.y),e=!0));var i=!1;if(!e){for(var n=0;n<this.markers.length;n++)i=i||this.drawCornerCursor(this.markers[n],t.x,t.y);i||b.setStyle(this.canvas,"initial")}i||e||!this.center.touchInBounds(t.x,t.y)?this.center.setOver(!1):(this.center.setOver(!0),b.setOver(this.canvas),b.setStyle(this.canvas,"move"))},e.prototype.drawCornerCursor=function(t,e,i){return t.touchInBounds(e,i)?(t.setOver(!0),t.getHorizontalNeighbour().position.x>t.position.x?t.getVerticalNeighbour().position.y>t.position.y?(b.setOver(this.canvas),b.setStyle(this.canvas,"nwse-resize")):(b.setOver(this.canvas),b.setStyle(this.canvas,"nesw-resize")):t.getVerticalNeighbour().position.y>t.position.y?(b.setOver(this.canvas),b.setStyle(this.canvas,"nesw-resize")):(b.setOver(this.canvas),b.setStyle(this.canvas,"nwse-resize")),!0):(t.setOver(!1),!1)},e.prototype.onTouchStart=function(t){if(this.crop.isImageSet()){var i=t.touches[0],n=e.getTouchPos(this.canvas,i),o=new v(n.x,n.y,i.identifier);c.instance.returnPoint(n),this.isMouseDown=!1;for(var s=0;s<this.markers.length;s++)this.markers[s].touchInBounds(o.x,o.y)&&(this.isMouseDown=!0);this.center.touchInBounds(o.x,o.y)&&(this.isMouseDown=!0)}},e.prototype.onTouchEnd=function(t){if(this.crop.isImageSet()){for(var e=0;e<t.changedTouches.length;e++){var i=this.getDragTouchForID(t.changedTouches[e].identifier);i&&void 0!==i&&((i.dragHandle instanceof m||i.dragHandle instanceof y)&&i.dragHandle.setOver(!1),this.handleRelease(i))}0===this.currentDragTouches.length&&(this.isMouseDown=!1,this.currentlyInteracting=!1)}},e.prototype.drawImageIOSFix=function(t,e,i,n,o,s,r,a,l,h){t.drawImage(e,i,n,o,s,r,a,l,h)},e.prototype.onMouseDown=function(t){this.crop.isImageSet()&&(this.isMouseDown=!0)},e.prototype.onMouseUp=function(t){this.crop.isImageSet()&&(b.setReleased(this.canvas),this.isMouseDown=!1,this.handleRelease(new v(0,0,0)))},e}(function(){}),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.__extends)(e,t),e}(Number),C=function(){function t(){}return t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x.debug&&console.log(t)},t}(),x=function(){function t(){}return t.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},t.imageHasData=function(t){return!!t.exifdata},t.base64ToArrayBuffer=function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),i=e.length,n=new ArrayBuffer(i),o=new Uint8Array(n),s=0;s<i;s++)o[s]=e.charCodeAt(s);return n},t.objectURLToBlob=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(){200!==i.status&&0!==i.status||e(i.response)},i.send()},t.getImageData=function(e,i){function n(n){var o=t.findEXIFinJPEG(n),s=t.findIPTCinJPEG(n);e.exifdata=o||{},e.iptcdata=s||{},i&&i.call(e)}if("src"in e&&e.src)if(/^data:/i.test(e.src))n(t.base64ToArrayBuffer(e.src));else if(/^blob:/i.test(e.src)){var o=new FileReader;o.onload=function(t){n(t.target.result)},t.objectURLToBlob(e.src,function(t){o.readAsArrayBuffer(t)})}else{var s=new XMLHttpRequest;s.onload=function(){if(200!==s.status&&0!==s.status)throw"Could not load image";n(s.response)},s.open("GET",e.src,!0),s.responseType="arraybuffer",s.send(null)}else if(FileReader&&(e instanceof Blob||e instanceof File)){var r=new FileReader;r.onload=function(t){C.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},r.readAsArrayBuffer(e)}},t.findEXIFinJPEG=function(e){var i=new DataView(e);if(C.log("Got file of length "+e.byteLength),255!==i.getUint8(0)||216!==i.getUint8(1))return C.log("Not a valid JPEG"),!1;for(var n,o=2,s=e.byteLength;o<s;){if(255!==i.getUint8(o))return C.log("Not a valid marker at offset "+o+", found: "+i.getUint8(o)),!1;if(n=i.getUint8(o+1),C.log(n),225===n)return C.log("Found 0xFFE1 marker"),t.readEXIFData(i,o+4);o+=2+i.getUint16(o+2)}},t.findIPTCinJPEG=function(e){var i=new DataView(e);if(C.log("Got file of length "+e.byteLength),255!==i.getUint8(0)||216!==i.getUint8(1))return C.log("Not a valid JPEG"),!1;for(var n,o,s=2,r=e.byteLength;s<r;){if(56===(n=i).getUint8(o=s)&&66===n.getUint8(o+1)&&73===n.getUint8(o+2)&&77===n.getUint8(o+3)&&4===n.getUint8(o+4)&&4===n.getUint8(o+5)){var a=i.getUint8(s+7);a%2!=0&&(a+=1),0===a&&(a=4);var l=s+8+a,h=i.getUint16(s+6+a);return t.readIPTCData(e,l,h)}s++}},t.readIPTCData=function(e,i,n){for(var o,s,r,a,l=new DataView(e),h={},u=i;u<i+n;)28===l.getUint8(u)&&2===l.getUint8(u+1)&&(a=l.getUint8(u+2))in t.IptcFieldMap&&(r=l.getInt16(u+3),s=t.IptcFieldMap[a],o=t.getStringFromDB(l,u+5,r),h.hasOwnProperty(s)?h[s]instanceof Array?h[s].push(o):h[s]=[h[s],o]:h[s]=o),u++;return h},t.readTags=function(e,i,n,o,s){for(var r,a,l=e.getUint16(n,!s),h={},u=0;u<l;u++)(a=o[e.getUint16(r=n+12*u+2,!s)])||C.log("Unknown tag: "+e.getUint16(r,!s)),h[a]=t.readTagValue(e,r,i,n,s);return h},t.readTagValue=function(e,i,n,o,s){var r,a,l,h,u,c,p=e.getUint16(i+2,!s),d=e.getUint32(i+4,!s),g=e.getUint32(i+8,!s)+n;switch(p){case 1:case 7:if(1===d)return e.getUint8(i+8,!s);for(r=d>4?g:i+8,a=[],h=0;h<d;h++)a[h]=e.getUint8(r+h);return a;case 2:return t.getStringFromDB(e,r=d>4?g:i+8,d-1);case 3:if(1===d)return e.getUint16(i+8,!s);for(r=d>2?g:i+8,a=[],h=0;h<d;h++)a[h]=e.getUint16(r+2*h,!s);return a;case 4:if(1===d)return e.getUint32(i+8,!s);for(a=[],h=0;h<d;h++)a[h]=e.getUint32(g+4*h,!s);return a;case 5:if(1===d)return u=e.getUint32(g,!s),c=e.getUint32(g+4,!s),(l=new S(u/c)).numerator=u,l.denominator=c,l;for(a=[],h=0;h<d;h++)u=e.getUint32(g+8*h,!s),c=e.getUint32(g+4+8*h,!s),a[h]=new S(u/c),a[h].numerator=u,a[h].denominator=c;return a;case 9:if(1===d)return e.getInt32(i+8,!s);for(a=[],h=0;h<d;h++)a[h]=e.getInt32(g+4*h,!s);return a;case 10:if(1===d)return e.getInt32(g,!s)/e.getInt32(g+4,!s);for(a=[],h=0;h<d;h++)a[h]=e.getInt32(g+8*h,!s)/e.getInt32(g+4+8*h,!s);return a}},t.getStringFromDB=function(t,e,i){for(var n="",o=e;o<e+i;o++)n+=String.fromCharCode(t.getUint8(o));return n},t.readEXIFData=function(e,i){if("Exif"!==t.getStringFromDB(e,i,4))return C.log("Not valid EXIF data! "+t.getStringFromDB(e,i,4)),!1;var n,o,s,r,a,l=i+6;if(18761===e.getUint16(l))n=!1;else{if(19789!==e.getUint16(l))return C.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!==e.getUint16(l+2,!n))return C.log("Not valid TIFF data! (no 0x002A)"),!1;var h=e.getUint32(l+4,!n);if(h<8)return C.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(l+4,!n)),!1;if((o=t.readTags(e,l,l+h,t.TiffTags,n)).ExifIFDPointer)for(s in r=t.readTags(e,l,l+o.ExifIFDPointer,t.Tags,n))if({}.hasOwnProperty.call(r,s)){switch(s){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":r[s]=t.StringValues[s][r[s]];break;case"ExifVersion":case"FlashpixVersion":r[s]=String.fromCharCode(r[s][0],r[s][1],r[s][2],r[s][3]);break;case"ComponentsConfiguration":r[s]=t.StringValues.Components[r[s][0]]+t.StringValues.Components[r[s][1]]+t.StringValues.Components[r[s][2]]+t.StringValues.Components[r[s][3]]}o[s]=r[s]}if(o.GPSInfoIFDPointer)for(s in a=t.readTags(e,l,l+o.GPSInfoIFDPointer,t.GPSTags,n))if({}.hasOwnProperty.call(a,s)){switch(s){case"GPSVersionID":a[s]=a[s][0]+"."+a[s][1]+"."+a[s][2]+"."+a[s][3]}o[s]=a[s]}return o},t.checkImageType=function(t){return t instanceof Image||t instanceof HTMLImageElement},t.getData=function(e,i){return!(this.checkImageType(e)&&!e.complete||(t.imageHasData(e)?i&&i.call(e):t.getImageData(e,i),0))},t.getTag=function(e,i){if(t.imageHasData(e))return e.exifdata[i]},t.getAllTags=function(e){if(!t.imageHasData(e))return{};var i,n=e.exifdata,o={};for(i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return o},t.pretty=function(e){if(!t.imageHasData(e))return"";var i,n=e.exifdata,o="";for(i in n)n.hasOwnProperty(i)&&("object"==typeof n[i]?n[i]instanceof Number?o+=i+" : "+n[i]+" ["+n[i].numerator+"/"+n[i].denominator+"]\r\n":o+=i+" : ["+n[i].length+" values]\r\n":o+=i+" : "+n[i]+"\r\n");return o},t.readFromBinaryFile=function(e){return t.findEXIFinJPEG(e)},t.debug=!1,t.IptcFieldMap={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"},t.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},t.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},t.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},t.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},t}(),I=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=+t,this.y=+e,this.w=+i,this.h=+n}return t.prototype.toBounds=function(){return new p(this.x,this.y,this.w,this.h)},t.prototype.isInitialized=function(){return 0!==this.x&&0!==this.y&&0!==this.w&&0!==this.h},t}(),P=function(){function t(t){this.cropPositionChange=new n.EventEmitter,this.onCrop=new n.EventEmitter,this.imageSet=new n.EventEmitter,this.renderer=t}return t.prototype.ngAfterViewInit=function(){var t=this.cropcanvas.nativeElement;this.settings||(this.settings=new g),this.settings.cropperClass&&this.renderer.setAttribute(t,"class",this.settings.cropperClass),this.settings.dynamicSizing?(this.windowListener=this.resize.bind(this),window.addEventListener("resize",this.windowListener)):(this.renderer.setAttribute(t,"width",this.settings.canvasWidth.toString()),this.renderer.setAttribute(t,"height",this.settings.canvasHeight.toString())),this.cropper||(this.cropper=new w(this.settings)),this.cropper.prepare(t)},t.prototype.ngOnChanges=function(t){if(this.isCropPositionChanged(t)){if(this.cropper.updateCropPosition(this.cropPosition.toBounds()),this.cropper.isImageSet()){var e=this.cropper.getCropBounds();this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(e)}this.updateCropBounds()}t.inputImage&&this.setImage(t.inputImage.currentValue),t.settings&&this.cropper&&this.cropper.isImageSet()&&(this.cropper.updateSettings(this.settings),this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()))},t.prototype.ngOnDestroy=function(){this.settings.dynamicSizing&&this.windowListener&&window.removeEventListener("resize",this.windowListener)},t.prototype.onTouchMove=function(t){this.cropper.onTouchMove(t)},t.prototype.onTouchStart=function(t){this.cropper.onTouchStart(t)},t.prototype.onTouchEnd=function(t){this.cropper.onTouchEnd(t),this.cropper.isImageSet()&&(this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()),this.updateCropBounds())},t.prototype.onMouseDown=function(t){this.cropper.onMouseDown(t)},t.prototype.onMouseUp=function(t){this.cropper.isImageSet()&&(this.cropper.onMouseUp(t),this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()),this.updateCropBounds())},t.prototype.onMouseMove=function(t){this.cropper.onMouseMove(t)},t.prototype.fileChangeListener=function(t){var e=this;if(0!==t.target.files.length){var i=t.target.files[0];if(this.settings.allowedFilesRegex.test(i.name)){var n=new Image,o=new FileReader;o.addEventListener("loadend",function(t){n.addEventListener("load",function(){e.setImage(n)}),n.src=t.target.result}),o.readAsDataURL(i)}}},t.prototype.resize=function(){var t=this.cropcanvas.nativeElement;this.settings.canvasWidth=t.offsetWidth,this.settings.canvasHeight=t.offsetHeight,this.cropper.resizeCanvas(t.offsetWidth,t.offsetHeight,!0)},t.prototype.reset=function(){this.cropper.reset(),this.renderer.setAttribute(this.cropcanvas.nativeElement,"class",this.settings.cropperClass),this.image.image=this.cropper.getCroppedImageHelper().src},t.prototype.setImage=function(t,e){var i=this;void 0===e&&(e=null),this.imageSet.emit(!0),this.renderer.setAttribute(this.cropcanvas.nativeElement,"class",this.settings.cropperClass+" "+this.settings.croppingClass),this.raf=window.requestAnimationFrame(function(){i.raf&&window.cancelAnimationFrame(i.raf),t.naturalHeight>0&&t.naturalWidth>0&&(t.height=t.naturalHeight,t.width=t.naturalWidth,window.cancelAnimationFrame(i.raf),i.getOrientedImage(t,function(n){if(i.settings.dynamicSizing){var o=i.cropcanvas.nativeElement;i.settings.canvasWidth=o.offsetWidth,i.settings.canvasHeight=o.offsetHeight,i.cropper.resizeCanvas(o.offsetWidth,o.offsetHeight,!1)}i.cropper.setImage(n),i.cropPosition&&i.cropPosition.isInitialized()&&i.cropper.updateCropPosition(i.cropPosition.toBounds()),i.image.original=n;var s=i.cropper.getCropBounds();i.image.image=i.cropper.getCroppedImageHelper().src,i.image||(i.image=t),null!=e&&(i.cropper.setBounds(s=e),i.cropper.updateCropPosition(s)),i.onCrop.emit(s)}))})},t.prototype.isCropPositionChanged=function(t){return!!(this.cropper&&t.cropPosition&&this.isCropPositionUpdateNeeded)||(this.isCropPositionUpdateNeeded=!0,!1)},t.prototype.updateCropBounds=function(){var t=this.cropper.getCropBounds();this.cropPositionChange.emit(new I(t.left,t.top,t.width,t.height)),this.isCropPositionUpdateNeeded=!1},t.prototype.getOrientedImage=function(t,e){var i;x.getData(t,function(){var n=x.getTag(t,"Orientation");if([3,6,8].indexOf(n)>-1){var o=document.createElement("canvas"),s=o.getContext("2d"),r=t.width,a=t.height,l=0,h=0,u=0;switch(n){case 3:l=-t.width,h=-t.height,u=180;break;case 6:r=t.height,a=t.width,h=-t.height,u=90;break;case 8:r=t.height,a=t.width,l=-t.width,u=270}o.width=r,o.height=a,s.rotate(u*Math.PI/180),s.drawImage(t,l,h),(i=document.createElement("img")).width=r,i.height=a,i.addEventListener("load",function(){e(i)}),i.src=o.toDataURL("image/png")}else e(i=t)})},t}(),D=n["\u0275crt"]({encapsulation:2,styles:[],data:{}});function R(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,[[2,0],["fileInput",1]],null,0,"input",[["accept","image/*"],["type","file"]],null,[[null,"change"]],function(t,e,i){var n=!0;return"change"===e&&(n=!1!==t.component.fileChangeListener(i)&&n),n},null,null))],null,null)}function M(t){return n["\u0275vid"](0,[n["\u0275qud"](402653184,1,{cropcanvas:0}),n["\u0275qud"](671088640,2,{fileInput:0}),(t()(),n["\u0275ted"](-1,null,["\n        "])),(t()(),n["\u0275eld"](3,0,null,null,7,"span",[["class","ng2-imgcrop"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n          "])),(t()(),n["\u0275and"](16777216,null,null,1,null,R)),n["\u0275did"](6,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),n["\u0275ted"](-1,null,["\n          "])),(t()(),n["\u0275eld"](8,0,[[1,0],["cropcanvas",1]],null,1,"canvas",[],null,[[null,"mousedown"],[null,"mouseup"],[null,"mousemove"],[null,"mouseleave"],[null,"touchmove"],[null,"touchend"],[null,"touchstart"]],function(t,e,i){var n=!0,o=t.component;return"mousedown"===e&&(n=!1!==o.onMouseDown(i)&&n),"mouseup"===e&&(n=!1!==o.onMouseUp(i)&&n),"mousemove"===e&&(n=!1!==o.onMouseMove(i)&&n),"mouseleave"===e&&(n=!1!==o.onMouseUp(i)&&n),"touchmove"===e&&(n=!1!==o.onTouchMove(i)&&n),"touchend"===e&&(n=!1!==o.onTouchEnd(i)&&n),"touchstart"===e&&(n=!1!==o.onTouchStart(i)&&n),n},null,null)),(t()(),n["\u0275ted"](-1,null,["\n          "])),(t()(),n["\u0275ted"](-1,null,["\n        "])),(t()(),n["\u0275ted"](-1,null,["\n      "]))],function(t,e){t(e,6,0,!e.component.settings.noFileInput)},null)}var k=function(){},F=i("ctMq"),T=i("YNBZ"),H=i("lGQG"),A=i("deSh"),U=i("+zhQ"),E=(i("/j7V"),i("mhOz")),N="http://localhost:8080/fileUploader/uploadImages/user-profile",W=function(){function t(t,e,i,n,o,s){this.authService=t,this.observableService=e,this.localizeService=i,this.fileUploaderService=n,this.router=o,this.authGuard=s,this.images=[],this.hasBaseDropZoneOver=!1,this.hasAnotherDropZoneOver=!1,this.uploadAllSuccess=!0,this.avatars=[],this.selectedAvatar=!1,this.uploader=new T.FileUploader({url:N,itemAlias:"user-profile",isHTML5:!0,allowedMimeType:["image/png","image/jpg","image/jpeg","image/gif","image/svg+xml"],maxFileSize:10485760}),this.profileCropperSettings=new g,this.profileCropperSettings.noFileInput=!0,this.profileCropperSettings.width=200,this.profileCropperSettings.height=200,this.profileCropperSettings.croppedWidth=200,this.profileCropperSettings.croppedHeight=200,this.profileCropperSettings.canvasWidth=500,this.profileCropperSettings.canvasHeight=300,this.profileCropperSettings.minWidth=10,this.profileCropperSettings.minHeight=10,this.profileCropperSettings.rounded=!0,this.profileCropperSettings.keepAspect=!1,this.profileCropperSettings.cropperDrawSettings.strokeColor="rgba(255,255,255,1)",this.profileCropperSettings.cropperDrawSettings.strokeWidth=2,this.data={}}return t.prototype.uploadBase64=function(){var t=this;this.fileUploaderService.uploadImagesBase64({username:this.authService.user.username,language:this.localizeService.parser.currentLang,image:this.data.image,name:this.uploader.queue[0].file.name,bucket:"user-profile"}).subscribe(function(e){e.success&&(t.avatars.push(e.url),t.chooseImage(t.avatars.length-1))})},t.prototype.fileChangeListener=function(t){this.image=new Image;var e=t.target.files[0],i=new FileReader,n=this;i.onloadend=function(t){n.image.src=t.target.result,n.profileCropper.setImage(n.image)},i.readAsDataURL(e)},t.prototype.setUploaderOptions=function(){var t=this,e=[];e.push({name:"Authorization",value:"Bearer "+this.authService.authToken}),this.uploadOptions={headers:e},this.uploader.setOptions(this.uploadOptions),this.uploader.onAfterAddingFile=function(e){t.uploader.queue.length>1&&t.uploader.removeFromQueue(t.uploader.queue[0]),e.withCredentials=!1},this.uploader.onBuildItemForm=function(e,i){i.append("language",t.localizeService.parser.currentLang)},this.uploader.onCompleteItem=function(e,i,n,o){var s=JSON.parse(i);t.images.push(s.file[0]),s.success||(t.uploadAllSuccess=!1)},this.uploader.onWhenAddingFileFailed=function(t){t.size>10485760?console.log("fitzategi haundiegia"):"image/png"!==t.type&&"image/jpg"!==t.type&&"image/jpeg"!==t.type&&"image/gif"!==t.type&&"image/svg+xml"!==t.type&&console.log("formatu okerra"),console.log("fail",t)}},t.prototype.deleteAvatar=function(t){var e=this;this.fileUploaderService.deleteProfileImage(this.authService.user.username,this.avatars[t].split("https://s3-eu-west-1.amazonaws.com/culture-bucket/user-profile/")[1],"user-profile",this.localizeService.parser.currentLang).subscribe(function(i){i.success&&(e.avatars.splice(t,1),e.observableService.notifyOther({option:e.observableService.avatarType,data:"assets/img/avatars/default-avatar.jpg"}))})},t.prototype.chooseImage=function(t){var e=this;this.authService.editUser({language:this.localizeService.parser.currentLang,currentAvatar:this.avatars[t],username:this.authService.user.username}).subscribe(function(i){i.success&&(e.authService.user.currentAvatar=e.avatars[t],e.observableService.notifyOther({option:e.observableService.avatarType,data:e.avatars[t]}))})},t.prototype.ngOnInit=function(){var t=this;this.authService.getAuthentication(this.localizeService.parser.currentLang).subscribe(function(e){e.success||(t.authService.logout(),t.authGuard.redirectUrl=t.router.url,t.router.navigate([t.localizeService.translateRoute("/sign-in-route")]))}),this.authService.getProfile(this.authService.user.username,this.localizeService.parser.currentLang).subscribe(function(e){e.success&&(t.avatars=e.user.avatars)}),this.setUploaderOptions()},t}(),z=i("42t3"),O=n["\u0275crt"]({encapsulation:0,styles:[[".img-thumbnail[_ngcontent-%COMP%]{background:#000}"]],data:{}});function B(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,0,"img",[],[[8,"src",4],[8,"width",0],[8,"height",0]],null,null,null,null))],null,function(t,e){var i=e.component;t(e,0,0,i.data.image,i.profileCropperSettings.croppedWidth,i.profileCropperSettings.croppedHeight)})}function L(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,1,"span",[["class","ks-filename"]],null,null,null,null,null)),(t()(),n["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.uploader.queue[0].file.name)})}function G(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,7,"li",[["class","ks-file"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n      "])),(t()(),n["\u0275eld"](2,0,null,null,2,"img",[["class","ks-thumb"]],[[8,"src",4]],[[null,"click"]],function(t,e,i){var n=!0;return"click"===e&&(n=!1!==(t.component.selectedAvatar=t.context.index)&&n),n},null,null)),n["\u0275did"](3,278528,null,0,a.NgClass,[n.IterableDiffers,n.KeyValueDiffers,n.ElementRef,n.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),n["\u0275pod"](4,{"img-thumbnail":0}),(t()(),n["\u0275ted"](-1,null,["\n      "])),(t()(),n["\u0275eld"](6,0,null,null,0,"a",[["class","ks-icon la la-trash"]],null,[[null,"click"]],function(t,e,i){var n=!0;return"click"===e&&(n=!1!==t.component.deleteAvatar(t.context.index)&&n),n},null,null)),(t()(),n["\u0275ted"](-1,null,["\n    "]))],function(t,e){t(e,3,0,"ks-thumb",t(e,4,0,e.component.selectedAvatar===e.context.index))},function(t,e){t(e,2,0,n["\u0275inlineInterpolate"](1,"",e.context.$implicit,""))})}function X(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,3,"button",[["class","btn btn-success btn-s"],["type","button"]],null,[[null,"click"]],function(t,e,i){var n=!0,o=t.component;return"click"===e&&(n=!1!==o.chooseImage(o.selectedAvatar)&&n),n},null,null)),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275eld"](2,0,null,null,0,"span",[["class","glyphicon glyphicon-upload"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,[" Aukeratu irudia\n"]))],null,null)}function Y(t){return n["\u0275vid"](0,[n["\u0275qud"](402653184,1,{profileCropper:0}),n["\u0275qud"](402653184,2,{profileEditorModal:0}),(t()(),n["\u0275eld"](2,0,null,null,17,"div",[["class","form-group required"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275eld"](4,0,null,null,2,"label",[["for","fileUploadArcheology"],["translate",""]],null,null,null,null,null)),n["\u0275did"](5,8536064,null,0,s.a,[r.a,n.ElementRef,n.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),n["\u0275ted"](6,null,["",""])),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275eld"](8,0,null,null,10,"button",[["class","btn btn-primary ks-btn-file d-block"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275eld"](10,0,null,null,0,"span",[["class","la la-cloud-upload ks-icon"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275eld"](12,0,null,null,2,"span",[["class","ks-text"],["translate",""]],null,null,null,null,null)),n["\u0275did"](13,8536064,null,0,s.a,[r.a,n.ElementRef,n.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),n["\u0275ted"](14,null,["",""])),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275eld"](16,0,null,null,1,"input",[["class","form-control"],["id","photos"],["ng2FileSelect",""],["type","file"]],null,[[null,"change"]],function(t,e,i){var o=!0,s=t.component;return"change"===e&&(o=!1!==n["\u0275nov"](t,17).onChange()&&o),"change"===e&&(o=!1!==s.fileChangeListener(i)&&o),o},null,null)),n["\u0275did"](17,16384,null,0,l.FileSelectDirective,[n.ElementRef],{uploader:[0,"uploader"]},null),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](21,0,null,null,1,"img-cropper",[],null,null,null,M,D)),n["\u0275did"](22,4898816,[[1,4],["profileCropper",4]],0,P,[n.Renderer2],{settings:[0,"settings"],image:[1,"image"]},null),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](24,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](26,0,null,null,0,"span",[["class","result rounded"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275and"](16777216,null,null,1,null,B)),n["\u0275did"](29,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](31,0,null,null,2,"label",[["for","progressbar"],["translate",""]],null,null,null,null,null)),n["\u0275did"](32,8536064,null,0,s.a,[r.a,n.ElementRef,n.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),n["\u0275ted"](33,null,["",""])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](35,0,null,null,20,"div",[["class","card panel ks-widget-attachments"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275eld"](37,0,null,null,17,"div",[["class","ks-uploading-progress-block"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275and"](16777216,null,null,1,null,L)),n["\u0275did"](40,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275eld"](42,0,null,null,11,"div",[["class","ks-progress ks-progress-inline"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n      "])),(t()(),n["\u0275eld"](44,0,null,null,5,"div",[["class","progress ks-progress-sm"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n        "])),(t()(),n["\u0275eld"](46,0,null,null,2,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["aria-valuenow","50"],["class","progress-bar progress-bar-striped bg-info"],["role","progressbar"]],null,null,null,null,null)),n["\u0275did"](47,278528,null,0,a.NgStyle,[n.KeyValueDiffers,n.ElementRef,n.Renderer2],{ngStyle:[0,"ngStyle"]},null),n["\u0275pod"](48,{width:0}),(t()(),n["\u0275ted"](-1,null,["\n      "])),(t()(),n["\u0275ted"](-1,null,["\n      "])),(t()(),n["\u0275eld"](51,0,null,null,1,"span",[["class","ks-amount"]],null,null,null,null,null)),(t()(),n["\u0275ted"](52,null,["",""])),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](57,0,null,null,3,"button",[["class","btn btn-success btn-s"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,i){var n=!0;return"click"===e&&(n=!1!==t.component.uploadBase64()&&n),n},null,null)),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275eld"](59,0,null,null,0,"span",[["class","glyphicon glyphicon-upload"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,[" Upload all\n"])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](62,0,null,null,1,"h5",[["class","ks-header"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["Irudia igo"])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275eld"](65,0,null,null,7,"div",[["class","ks-files"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275eld"](67,0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275and"](16777216,null,null,1,null,G)),n["\u0275did"](70,802816,null,0,a.NgForOf,[n.ViewContainerRef,n.TemplateRef,n.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275ted"](-1,null,["\n"])),(t()(),n["\u0275and"](16777216,null,null,1,null,X)),n["\u0275did"](75,16384,null,0,a.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),n["\u0275ted"](-1,null,["\n"]))],function(t,e){var i=e.component;t(e,5,0,""),t(e,13,0,""),t(e,17,0,i.uploader),t(e,22,0,i.profileCropperSettings,i.data),t(e,29,0,i.data.image),t(e,32,0,""),t(e,40,0,i.uploader.queue.length),t(e,47,0,t(e,48,0,i.uploader.progress+"%")),t(e,70,0,i.avatars),t(e,75,0,!1!==i.selectedAvatar)},function(t,e){var i=e.component;t(e,6,0,"event-form.images"),t(e,14,0,"event-form.choose-image"),t(e,33,0,"event-form.queue-progress"),t(e,52,0,i.uploader.progress+"%"),t(e,57,0,!i.uploader.getNotUploadedItems().length)})}var V=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),j=n["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function _(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,55,"div",[["class","ks-page-content"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275eld"](2,0,null,null,52,"div",[["class","ks-page-content-body"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275eld"](4,0,null,null,49,"div",[["class","ks-nav-body-wrapper"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n      "])),(t()(),n["\u0275eld"](6,0,null,null,46,"div",[["class","container-fluid ks-rows-section"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n        "])),(t()(),n["\u0275eld"](8,0,null,null,43,"div",[["class","row"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n          "])),(t()(),n["\u0275eld"](10,0,null,null,40,"section",[["class","col-lg-12 col-md-12 col-sm-12 col-xs-12"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n            "])),(t()(),n["\u0275eld"](12,0,null,null,37,"div",[["class","card panel ks-widget ks-widget-post"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n              "])),(t()(),n["\u0275eld"](14,0,null,null,5,"h5",[["class","card-header"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n              "])),(t()(),n["\u0275eld"](16,0,null,null,2,"span",[["class","ks-text"],["translate",""]],null,null,null,null,null)),n["\u0275did"](17,8536064,null,0,s.a,[r.a,n.ElementRef,n.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),n["\u0275ted"](18,null,["",""])),(t()(),n["\u0275ted"](-1,null,["\n            "])),(t()(),n["\u0275ted"](-1,null,["\n              "])),(t()(),n["\u0275eld"](21,0,null,null,27,"div",[["class","card-block"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n                "])),(t()(),n["\u0275eld"](23,0,null,null,24,"div",[["class","ks-tabs-container ks-tabs-default ks-tabs-no-separator ks-widget-attachments"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n                  "])),(t()(),n["\u0275eld"](25,0,null,null,11,"ul",[["class","nav ks-nav-tabs"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n                    "])),(t()(),n["\u0275eld"](27,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n                      "])),(t()(),n["\u0275eld"](29,0,null,null,4,"a",[["class","nav-link active"],["data-target","#tab1"],["data-toggle","tab"],["href","#"],["translate",""]],null,null,null,null,null)),n["\u0275did"](30,8536064,null,0,s.a,[r.a,n.ElementRef,n.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),n["\u0275ted"](-1,null,["\n                        "])),(t()(),n["\u0275eld"](32,0,null,null,0,"span",[["class","ks-icon la la-user text-info"]],null,null,null,null,null)),(t()(),n["\u0275ted"](33,null,["\n                        ","\n                      "])),(t()(),n["\u0275ted"](-1,null,["\n                    "])),(t()(),n["\u0275ted"](-1,null,["\n                    "])),(t()(),n["\u0275ted"](-1,null,["\n                  "])),(t()(),n["\u0275ted"](-1,null,["\n                  "])),(t()(),n["\u0275eld"](38,0,null,null,8,"div",[["class","tab-content"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n                    "])),(t()(),n["\u0275eld"](40,0,null,null,4,"div",[["class","tab-pane active"],["id","tab1"],["role","tabpanel"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n                      "])),(t()(),n["\u0275eld"](42,0,null,null,1,"app-profile",[],null,null,null,Y,O)),n["\u0275did"](43,114688,null,0,W,[H.a,A.a,z.LocalizeRouterService,F.a,E.Router,U.a],null,null),(t()(),n["\u0275ted"](-1,null,["\n                    "])),(t()(),n["\u0275ted"](-1,null,["\n                    "])),(t()(),n["\u0275ted"](-1,null,["\n                  "])),(t()(),n["\u0275ted"](-1,null,["\n                "])),(t()(),n["\u0275ted"](-1,null,["\n              "])),(t()(),n["\u0275ted"](-1,null,["\n            "])),(t()(),n["\u0275ted"](-1,null,["\n          "])),(t()(),n["\u0275ted"](-1,null,["\n        "])),(t()(),n["\u0275ted"](-1,null,["\n      "])),(t()(),n["\u0275ted"](-1,null,["\n    "])),(t()(),n["\u0275ted"](-1,null,["\n  "])),(t()(),n["\u0275ted"](-1,null,["\n"]))],function(t,e){t(e,17,0,""),t(e,30,0,""),t(e,43,0)},function(t,e){t(e,18,0,"navbar.user"),t(e,33,0,"navbar.user")})}var q=n["\u0275ccf"]("app-user",V,function(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,1,"app-user",[],null,null,null,_,j)),n["\u0275did"](1,114688,null,0,V,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),J=i("ITrX"),K=i("yBPo"),Z=i("4lDY"),Q=i("qcfG"),$=i("xaNE"),tt=i("FNNE"),et=i("gW6t"),it=i("u4HF"),nt=i("aq8m"),ot=i("1uLY"),st=i("n2nD"),rt=i("iCtU"),at=i("Ovjw"),lt=i("NGTP"),ht=i("OTqP"),ut=i("kktJ"),ct=i("QPGT"),pt=i("uJrM"),dt=i("DN9k"),gt=i("VCx4"),ft=i("EVp5"),mt=i("mIVG"),vt=i("q3l8"),yt=function(){},bt=i("S6T7"),wt=i("/fSM"),St=i("AEJi"),Ct=i("n9gd"),xt=i("qiiV"),It=i("A5XC"),Pt=i("PCNd"),Dt=i("/Rwj"),Rt=i("0ibv"),Mt=i("LKjY"),kt=i("bt6x"),Ft=i("0XGt"),Tt=i("PsaP"),Ht=i("nhl2"),At=i("InZo"),Ut=i("C9m0"),Et=i("+NDo"),Nt=i("4WQT"),Wt=i("wtSO"),zt=i("gpiN"),Ot=i("NlYj"),Bt=i("neuq"),Lt=i("y+WT"),Gt=i("MVL9"),Xt=i("j2fZ"),Yt=i("eUd/"),Vt=i("862v"),jt=i("R756"),_t=i("axVG"),qt=i("Y+n1"),Jt=i("UDGg"),Kt=i("SJpE");i.d(e,"UserModuleNgFactory",function(){return Zt});var Zt=n["\u0275cmf"](o,[],function(t){return n["\u0275mod"]([n["\u0275mpd"](512,n.ComponentFactoryResolver,n["\u0275CodegenComponentFactoryResolver"],[[8,[q,J.a,K.a,Z.a,Q.a,$.a,tt.a,et.a,it.a,nt.a,ot.a]],[3,n.ComponentFactoryResolver],n.NgModuleRef]),n["\u0275mpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[n.LOCALE_ID,[2,a["\u0275a"]]]),n["\u0275mpd"](4608,st.y,st.y,[]),n["\u0275mpd"](4608,st.e,st.e,[]),n["\u0275mpd"](4608,rt.a,rt.a,[n.ComponentFactoryResolver,n.Injector,at.a]),n["\u0275mpd"](4608,lt.a,lt.a,[ht.DomSanitizer]),n["\u0275mpd"](4608,ut.a,ut.a,[]),n["\u0275mpd"](4608,ct.a,ct.a,[]),n["\u0275mpd"](4608,pt.a,pt.a,[]),n["\u0275mpd"](4608,dt.a,dt.a,[]),n["\u0275mpd"](4608,gt.a,gt.a,[]),n["\u0275mpd"](4608,ft.a,ft.a,[]),n["\u0275mpd"](512,a.CommonModule,a.CommonModule,[]),n["\u0275mpd"](512,mt.TranslateModule,mt.TranslateModule,[]),n["\u0275mpd"](512,E.RouterModule,E.RouterModule,[[2,E["\u0275a"]],[2,E.Router]]),n["\u0275mpd"](512,vt.LocalizeRouterModule,vt.LocalizeRouterModule,[]),n["\u0275mpd"](512,yt,yt,[]),n["\u0275mpd"](512,bt.FileUploadModule,bt.FileUploadModule,[]),n["\u0275mpd"](512,st.v,st.v,[]),n["\u0275mpd"](512,st.j,st.j,[]),n["\u0275mpd"](512,st.s,st.s,[]),n["\u0275mpd"](512,wt.a,wt.a,[]),n["\u0275mpd"](512,St.a,St.a,[]),n["\u0275mpd"](512,Ct.a,Ct.a,[]),n["\u0275mpd"](512,xt.a,xt.a,[]),n["\u0275mpd"](512,It.a,It.a,[]),n["\u0275mpd"](512,Pt.a,Pt.a,[]),n["\u0275mpd"](512,Dt.a,Dt.a,[]),n["\u0275mpd"](512,Rt.InlineSVGModule,Rt.InlineSVGModule,[]),n["\u0275mpd"](512,Mt.a,Mt.a,[]),n["\u0275mpd"](512,kt.a,kt.a,[]),n["\u0275mpd"](512,Ft.a,Ft.a,[]),n["\u0275mpd"](512,Tt.a,Tt.a,[]),n["\u0275mpd"](512,Ht.a,Ht.a,[]),n["\u0275mpd"](512,At.b,At.b,[]),n["\u0275mpd"](512,Ut.a,Ut.a,[]),n["\u0275mpd"](512,Et.a,Et.a,[]),n["\u0275mpd"](512,Nt.a,Nt.a,[]),n["\u0275mpd"](512,Wt.a,Wt.a,[]),n["\u0275mpd"](512,zt.a,zt.a,[]),n["\u0275mpd"](512,Ot.a,Ot.a,[]),n["\u0275mpd"](512,Bt.a,Bt.a,[]),n["\u0275mpd"](512,Lt.a,Lt.a,[]),n["\u0275mpd"](512,Gt.a,Gt.a,[]),n["\u0275mpd"](512,Xt.a,Xt.a,[]),n["\u0275mpd"](512,Yt.b,Yt.b,[]),n["\u0275mpd"](512,Vt.a,Vt.a,[]),n["\u0275mpd"](512,jt.a,jt.a,[]),n["\u0275mpd"](512,_t.a,_t.a,[]),n["\u0275mpd"](512,qt.a,qt.a,[]),n["\u0275mpd"](512,k,k,[]),n["\u0275mpd"](512,o,o,[]),n["\u0275mpd"](1024,E.ROUTES,function(){return[[{path:"",component:V,canActivate:[U.a],pathMatch:"full"},{path:"user-route",component:V,canActivate:[U.a]}],[{path:"",component:Jt.b,pathMatch:"full"}],[]]},[]),n["\u0275mpd"](1024,Kt.RAW_ROUTES,function(){return[[{path:"",component:V,canActivate:[U.a],pathMatch:"full"},{path:"user-route",component:V,canActivate:[U.a]}],[{path:"",component:Jt.b,pathMatch:"full"}],[]]},[]),n["\u0275mpd"](256,st.a,!1,[])])})},YNBZ:function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}n(i("5xlC")),n(i("pKD1")),n(i("UpIn")),n(i("b6v0")),n(i("oQam"));var o=i("S6T7");e.FileUploadModule=o.FileUploadModule}}]);