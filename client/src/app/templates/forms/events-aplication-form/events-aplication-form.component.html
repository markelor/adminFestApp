<!-- Custom Success/Error Message -->
<div class="row">
  <div [ngClass]="messageClass">
    {{ message }}
  </div>
</div>
<!-- Events Aplication Form -->
<form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-horizontal">
  <div class="row">
    <!-- Event -->
    <div class="col-sm-12">
      <div class="form-group required" [ngClass]="{'has-error': (!event.valid && event.dirty), 'has-success': (event.valid)}">
        <label for="textareaEvent" translate>{{'aplication-form.events'}}</label>
        <div class="input-group icon">
          <input (keyup)="searchTerm.next($event.target.value)" [formControl]="event" capitalize type="text" class="form-control" id="inputEvent">
          <div class="input-group-append ">
            <button (click)="addEvent()" type="button" class="btn btn-success ks-light ks-no-text">
              <span class="la la-plus ks-icon"></span>
            </button>
          </div>
        </div>
        <table click-outside (clickOutside)="onClickOutside()" *ngIf="searchTerm.observers[0].destination.key && search" class="table table-hover ks-table-cells-vertical-align-middle ks-crm-contacts-events-list-column-table">
          <tbody>
            <tr (click)="selectEvent(i)" *ngFor="let event of eventsSearch; let i=index">
              <td width="1">
                <img src="{{event.images.poster[0].url}}" class="ks-avatar rounded-circle" width="36" height="36">
              </td>
              <td width="200">
                <div class="ks-name">{{event.title}}</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <!-- Events list -->
    <div class="col-sm-12">
      <div class="form-group">
        <label *ngFor="let event of selectedEvents" class="custom-control custom-checkbox">
          <input type="checkbox" class="custom-control-input">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">{{event}}</span>
        </label>
      </div>
    </div>
    <!-- Submit Button -->
    <div class="col-sm-12">
      <div class="form-group text-center">
        <button [disabled]="!form.valid || selectedEvents.length<=0 || submitted" type="submit" class="btn btn-default btn-auth" translate>{{'aplication-form.send'}}</button>
      </div>
    </div>
  </div>
</form>
<table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
  <thead>
    <tr>
      <th>Created By</th>
      <th>Title</th>
      <th>Start</th>
      <th>End</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let event of eventsArray">
      <td>{{event.createdBy}}</td>
      <td>{{event.title}}</td>
      <td>{{event.start}}</td>
      <td>{{event.end }}</td>
      <td class="ks-status">
        <a href="javascript:void(0)" (click)="categoryDeleteClick(i,category)"><span class="fa fa-trash ks-color-danger">Delete</span></a>
      </td>
    </tr>
  </tbody>
</table>
